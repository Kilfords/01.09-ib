Домашнее задание к занятию "«Репликация и масштабирование. Часть 2»" - Боковиков Илья студента
Инструкция по выполнению домашнего задания

    Сделайте fork данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
    Выполните клонирование данного репозитория к себе на ПК с помощью команды git clone.
    Выполните домашнее задание и заполните у себя локально этот файл README.md:
        впишите вверху название занятия и вашу фамилию и имя
        в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
        для корректного добавления скриншотов воспользуйтесь инструкцией "Как вставить скриншот в шаблон с решением
        при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в инструкции по MarkDown)
    После завершения работы над домашним заданием сделайте коммит (git commit -m "comment") и отправьте его на Github (git push origin);
    Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
    Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.

Задание 1

Опишите основные преимущества использования масштабирования методами:

    активный master-сервер и пассивный репликационный slave-сервер;
    master-сервер и несколько slave-серверов;

Репликация бывает двух подходов: покомандная и построчная. 
Покомандная репа: в журнал master протоколируются запросы изменения данных (INSERT, UPDATE, DELETE) на slave - повторяются 
При построчной репликации в журнале запишутся изменения данных, тоже произойдёт на slave 

Репликация master-master позволяет копировать данные с одного сервера на другой. Эта конфигурация добавляет избыточность и повышает эффективность при обращении к данным. 
Master-master репа - это настройка обычной master-slave репы, только в обе стороны. Каждый сервер является мастером и слейвом одновременно 
Мастре принимает данные и записывает их но если есть слейв, то он подключается к мастеру принимает данные но не записывает их, то есть их можно только прочитать 
Если разрешить запись на слейве то слейв станет мастером и будет master-master 
Схема: один главный сервер (master), на котором происходят все изменения данных, и один резервный сервер (slave), который получает копию данных, но не обслуживает пользователей в обычном режиме.

Преимущества:
Резервирование / отказоустойчивость
Если мастер падает, можно быстро переключить нагрузку на slave (с минимальными потерями).
Это снижает риск полной остановки системы.
Простота настройки и администрирования
Всего два сервера, простая репликация.
Меньше сложностей с конфигурациями и мониторингом.
Снижение риска потери данных
Реплика на slave обновляется почти в реальном времени (зависит от настроек), что обеспечивает актуальность резервной копии.
Минус:
Slave обычно не обрабатывает запросы пользователей, поэтому нагрузку на систему не снижает.

Master-сервер + несколько slave-серверов

Схема: один мастер, несколько слейвов, которые могут одновременно обслуживать запросы на чтение.

Преимущества:

Балансировка нагрузки

Все slave могут отдавать данные пользователям для операций чтения.

Мастер занят только записью, чтение распределено между несколькими серверами.

Масштабируемость

Легко добавлять новые слейвы, если растёт количество пользователей.

Система выдерживает больше одновременных подключений без замедления работы.

Повышенная отказоустойчивость

Если один слейв падает, другие продолжают работу.

Можно назначить один из слейвов резервным на случай падения мастера.

Гибкость для аналитики и бэкапов

Слейвы можно использовать для сложных запросов и отчетов, не нагружая мастер.

Минус:

Более сложная конфигурация и синхронизация данных.

Возможна задержка репликации (slave могут отставать на миллисекунды или секунды)

Задание 2

Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:

    пользователи,
    книги,
    магазины (столбцы произвольно).

Опишите принципы построения системы и их разграничение или разбивку между базами данных.

![блоксхема](/img/схема.jpg)

Принцип работы

Клиент (или приложение) обращается к базе через шард-маршрутизатор или логика в приложении, которая решает, к какому шард-серверу отправить запрос.

Все записи идут на Master шард.

Реплика на VM3 синхронизируется и обрабатывает только чтение или аналитические задачи.

Если Master падает — временно можно переключить логику на реплику VM3 до восстановления.


